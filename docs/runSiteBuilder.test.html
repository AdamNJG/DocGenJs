<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>runSiteBuilder.test</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <page-nav><nav class="pages-nav" aria-label="Pages navigation">
      <ul class="page-links"><li><a href="./index.html">index</a></li><li><a href="./components.test.html">components.test</a></li><li><a href="./config.test.html">config.test</a></li><li><a href="./pageBuilder.test.html">pageBuilder.test</a></li><li><a href="./runSiteBuilder.test.html">runSiteBuilder.test</a></li><li><a href="./treeBuilder.test.html">treeBuilder.test</a></li></ul>
    </nav></page-nav>
  <header>
    <h1>runSiteBuilder.test</h1>
  </header>

  <main id="content">
    <module-component>
      <article class="module-component" role="region" aria-labelledby="module-title">
        <h1 id="module-title">runSiteBuilder.test</h1>
        <section class="features" aria-label="Features">
          <ul>
          <li id="feature-1" class="feature-container"><feature-component><article class="feature-component" role="region" aria-labelledby="feature-1-title">
      <h2 id="feature-1-title">SiteBuilder</h2>
      <ul class="use-cases" aria-label="Use Cases">
      <use-case-component><li class="use-case" aria-labeledby="usecase-1-title">
      <h3 id="usecase-1-title">ts config will trigger site generation to default location, overriding existing files</h3>
      <pre class="code-block"><code>
    <span class="token keyword">const</span> outputDirectory <span class="token operator">=</span> <span class="token string">'./__tests__/docs/runSiteBuilderTests'</span><span class="token punctuation">;</span>

    <span class="token keyword">await</span> <span class="token function">replaceDocGenConfig</span><span class="token punctuation">(</span><span class="token string">'.ts'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    fs<span class="token punctuation">.</span><span class="token function">mkdirSync</span><span class="token punctuation">(</span>outputDirectory<span class="token punctuation">,</span> <span class="token punctuation">{</span> recursive<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> dummyPagePath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>outputDirectory<span class="token punctuation">,</span> <span class="token string">'oldPage.html'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span>dummyPagePath<span class="token punctuation">,</span> <span class="token string">'old content'</span><span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">await</span> <span class="token function">runSiteBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">expect</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>dummyPagePath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>outputDirectory<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expectGeneratedFiles</span><span class="token punctuation">(</span>outputDirectory<span class="token punctuation">,</span> expectedFiles<span class="token punctuation">)</span><span class="token punctuation">;</span>
  </code></pre>
    </li></use-case-component><use-case-component><li class="use-case" aria-labeledby="usecase-2-title">
      <h3 id="usecase-2-title">passing in js config will trigger site generation to specified location</h3>
      <pre class="code-block"><code>
    <span class="token keyword">const</span> outputDirectory <span class="token operator">=</span> <span class="token string">'./__tests__/docs'</span><span class="token punctuation">;</span>

    <span class="token keyword">await</span> <span class="token function">replaceDocGenConfig</span><span class="token punctuation">(</span><span class="token string">'.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
      includes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'__tests__/treeBuilderFakeTests'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      outputDirectory<span class="token operator">:</span> <span class="token string">'./__tests__/docs'</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">await</span> <span class="token function">runSiteBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">expect</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>outputDirectory<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expectGeneratedFiles</span><span class="token punctuation">(</span>outputDirectory<span class="token punctuation">,</span> expectedFiles<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token function">checkGeneratedPages</span><span class="token punctuation">(</span>expectedContents<span class="token punctuation">,</span> config<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">checkGeneratedPages</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">'index.html'</span><span class="token operator">:</span> <span class="token punctuation">(</span>document<span class="token operator">:</span> Document<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> nav <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.pages-nav'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">testElement</span><span class="token punctuation">(</span>nav<span class="token punctuation">,</span> <span class="token string">'nav'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string-property property">'aria-label'</span><span class="token operator">:</span> <span class="token string">'Pages navigation'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">const</span> ul <span class="token operator">=</span> nav<span class="token operator">?.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'ul'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">expect</span><span class="token punctuation">(</span>ul<span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">const</span> pages <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'fake.test'</span><span class="token punctuation">,</span>
        <span class="token string">'more.fake.test'</span><span class="token punctuation">,</span>
        <span class="token string">'no.describe.fake.test'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

      pages<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>page <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> link <span class="token operator">=</span> <span class="token builtin">Array</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>ul<span class="token operator">?.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'li &gt; a'</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>a <span class="token operator">=&gt;</span> a<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'href'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>page<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.html</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">expect</span><span class="token punctuation">(</span>link<span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>link<span class="token operator">?.</span>textContent<span class="token operator">?.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> tabIndex <span class="token operator">=</span> link<span class="token operator">?.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'tabindex'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>tabIndex <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token function">Number</span><span class="token punctuation">(</span>tabIndex<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token punctuation">}</span>
    <span class="token punctuation">,</span> config<span class="token punctuation">)</span><span class="token punctuation">;</span>
  </code></pre>
    </li></use-case-component><use-case-component><li class="use-case" aria-labeledby="usecase-3-title">
      <h3 id="usecase-3-title">passing in json config will trigger site generation to specified location</h3>
      <pre class="code-block"><code>
    <span class="token keyword">const</span> outputDirectory <span class="token operator">=</span> <span class="token string">'./__tests__/docs'</span><span class="token punctuation">;</span>

    <span class="token keyword">await</span> <span class="token function">replaceDocGenConfig</span><span class="token punctuation">(</span><span class="token string">'.json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
      includes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'__tests__/treeBuilderFakeTests'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      outputDirectory<span class="token operator">:</span> <span class="token string">'./__tests__/docs'</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">await</span> <span class="token function">runSiteBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">expect</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>outputDirectory<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expectGeneratedFiles</span><span class="token punctuation">(</span>outputDirectory<span class="token punctuation">,</span> expectedFiles<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token function">checkGeneratedPages</span><span class="token punctuation">(</span>expectedContents<span class="token punctuation">,</span> config<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">checkGeneratedPages</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">'index.html'</span><span class="token operator">:</span> <span class="token punctuation">(</span>document<span class="token operator">:</span> Document<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> nav <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.pages-nav'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">testElement</span><span class="token punctuation">(</span>nav<span class="token punctuation">,</span> <span class="token string">'nav'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string-property property">'aria-label'</span><span class="token operator">:</span> <span class="token string">'Pages navigation'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">const</span> ul <span class="token operator">=</span> nav<span class="token operator">?.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'ul'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">expect</span><span class="token punctuation">(</span>ul<span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">const</span> pages <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'fake.test'</span><span class="token punctuation">,</span>
        <span class="token string">'more.fake.test'</span><span class="token punctuation">,</span>
        <span class="token string">'no.describe.fake.test'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

      pages<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>page <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> link <span class="token operator">=</span> <span class="token builtin">Array</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>ul<span class="token operator">?.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'li &gt; a'</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>a <span class="token operator">=&gt;</span> a<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'href'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>page<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.html</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">expect</span><span class="token punctuation">(</span>link<span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>link<span class="token operator">?.</span>textContent<span class="token operator">?.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> tabIndex <span class="token operator">=</span> link<span class="token operator">?.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'tabindex'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>tabIndex <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token function">Number</span><span class="token punctuation">(</span>tabIndex<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token punctuation">}</span>
    <span class="token punctuation">,</span> config<span class="token punctuation">)</span><span class="token punctuation">;</span>
  </code></pre>
    </li></use-case-component><use-case-component><li class="use-case" aria-labeledby="usecase-4-title">
      <h3 id="usecase-4-title">passing in ts config with overriden templateDirectory that exists but is empty</h3>
      <pre class="code-block"><code>
    <span class="token keyword">await</span> <span class="token function">replaceDocGenConfig</span><span class="token punctuation">(</span><span class="token string">'.ts'</span><span class="token punctuation">,</span> <span class="token string">'./__tests__/configs/template/docgen.config.ts'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> consoleSpy<span class="token operator">:</span> ReturnType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> vi<span class="token punctuation">.</span>spyOn<span class="token operator">&gt;</span> <span class="token operator">=</span> vi<span class="token punctuation">.</span><span class="token function">spyOn</span><span class="token punctuation">(</span><span class="token builtin">console</span><span class="token punctuation">,</span> <span class="token string">'error'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mockImplementation</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> outputDirectory <span class="token operator">=</span> <span class="token string">'./__tests__/docs'</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> templateDirectory <span class="token operator">=</span> <span class="token string">'./__tests__/no_template'</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> resolvedTemplatePath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'__tests__'</span><span class="token punctuation">,</span> <span class="token string">'no_template'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token function">createEmptyFolder</span><span class="token punctuation">(</span>resolvedTemplatePath<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">await</span> <span class="token function">runSiteBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">expect</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>outputDirectory<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expectGeneratedFiles</span><span class="token punctuation">(</span>outputDirectory<span class="token punctuation">,</span> expectedFiles<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">expect</span><span class="token punctuation">(</span>consoleSpy<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalledWith</span><span class="token punctuation">(</span>expect<span class="token punctuation">.</span><span class="token function">stringContaining</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Source file does not exist: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>templateDirectory<span class="token punctuation">,</span> <span class="token string">'index.html'</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, aborting copy for this file</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>consoleSpy<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalledWith</span><span class="token punctuation">(</span>expect<span class="token punctuation">.</span><span class="token function">stringContaining</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Source file does not exist: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>templateDirectory<span class="token punctuation">,</span> <span class="token string">'styles.css'</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, aborting copy for this file</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    consoleSpy<span class="token punctuation">.</span><span class="token function">mockRestore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">deleteEmptyFolder</span><span class="token punctuation">(</span>resolvedTemplatePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
  </code></pre>
    </li></use-case-component><use-case-component><li class="use-case" aria-labeledby="usecase-5-title">
      <h3 id="usecase-5-title">uses default config when none exists</h3>
      <pre class="code-block"><code>  
    <span class="token keyword">const</span> consoleSpy <span class="token operator">=</span> vi<span class="token punctuation">.</span><span class="token function">spyOn</span><span class="token punctuation">(</span><span class="token builtin">console</span><span class="token punctuation">,</span> <span class="token string">'log'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mockImplementation</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> outputDirectory <span class="token operator">=</span> <span class="token string">'./docs'</span><span class="token punctuation">;</span>
      <span class="token keyword">await</span> <span class="token function">renameDocGenConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">await</span> <span class="token function">runSiteBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token function">expect</span><span class="token punctuation">(</span>consoleSpy<span class="token punctuation">.</span>mock<span class="token punctuation">.</span>calls<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toContain</span><span class="token punctuation">(</span><span class="token string">'Using default configuration. You can create a docgen.config.ts/js file to customise future runs.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      
      <span class="token function">expect</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>outputDirectory<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">expectGeneratedFiles</span><span class="token punctuation">(</span>outputDirectory<span class="token punctuation">,</span> expectedFiles<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
      <span class="token function">checkGeneratedPages</span><span class="token punctuation">(</span>expectedContents<span class="token punctuation">,</span> <span class="token punctuation">{</span> includes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> outputDirectory<span class="token operator">:</span> outputDirectory <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
      consoleSpy<span class="token punctuation">.</span><span class="token function">mockRestore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  </code></pre>
    </li></use-case-component><use-case-component><li class="use-case" aria-labeledby="usecase-6-title">
      <h3 id="usecase-6-title">passing in invalid config error displayed</h3>
      <pre class="code-block"><code>
    <span class="token keyword">const</span> consoleSpy <span class="token operator">=</span> vi<span class="token punctuation">.</span><span class="token function">spyOn</span><span class="token punctuation">(</span><span class="token builtin">console</span><span class="token punctuation">,</span> <span class="token string">'error'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mockImplementation</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> config<span class="token operator">:</span> DocGenConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
        includes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>

      <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">SiteBuilder</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toThrow</span><span class="token punctuation">(</span><span class="token string">'process.exit unexpectedly called with "1"'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token function">expect</span><span class="token punctuation">(</span>consoleSpy<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
      consoleSpy<span class="token punctuation">.</span><span class="token function">mockRestore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  </code></pre>
    </li></use-case-component></ul>
    </article></feature-component></li></ul>
        </section>
      </article></module-component>
  </main>

  <footer>
    <p>© 2025 Generated by DocGenJS</p>
  </footer>
</body>
</html>